language: java
jdk:
  - oraclejdk8
dist: trusty
install: true

branches:
  only:
    - master
    - develop
script:
  - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar -Dsonar.projectKey=API4KBs_kmdp-knowledgebase-service -Ppublic -q

deploy:
  - provider: script
    script: mvn deploy -DskipTests -Ppublic -s .travis.settings.xml
    skip_cleanup: true
    on:
      branch: master
  - provider: script
    script: mvn deploy -DskipTests -Ppublic -s .travis.settings.xml
    skip_cleanup: true
    on:
      branch: develop

addons:
  sonarcloud:
    organization: "api4kbs"
    token:
      secure: "DOfsdz11tFi+0+5TqnpH6xf1xxq2xl5lFO0udnYi66ZiDqAl3yfFFHUhvKvZSSMnEk7TFkvSEQszANjJ0jXgXlWAVxA324y6TSxpB52KyJB80BMDSYuft/JLXpF+p7VJLrzGtYiS8022CGxj/aSQgt0/y2coN8YdgYIfrPvXsQYa1uwgZ0jRL7X5g2Lx7B6wC5YCZmnLUSd8IeLz512ae8iV6AWJfnTN79j2p8tPI7Ly6s6TQTNSKKNc9gDhGU40LEdw0gi8iOG7blbxwaWI72npW66DfmLJiMbsJzOd5p1tk1A9ExjqqLJbdnCfF86eGAbx3bV8rIyQAWl6nZnLGB+4SHKWNsuMFpscgNrLVmYYDNnMojZETF20VWsXoeu+CpV5KRfgiVHFEwR0F5f5orhP43sy/Atx2J/GQ/TqwIUaiUdQ7rwEmg9skTgIdw2Ktoup6lXdkfS/un82gYrGHeRe1ORn+G+vrtyp08yM1ZlWhI6ou1cUQbdMlA2nwemBndi+Yo6xi0ckZJQc3gJ7x/6IibovkdmTHwbmkV0a1I9//3VnKGCByp0jgRF/CFfblXRG0rz2BG9PW+xRbI0gNoyFuUl9CSC9y3ImJaN55nltUD72Bs1lZNJqFvuYQ+xQb8fsam4A5eAR/zArDehoXQkAXbJ3reQZAU9ASIiR9OI="

env:
